# üöÄ Deploy to Render - Step by Step Guide

## Prerequisites Checklist
- [ ] MongoDB Atlas account (free tier)
- [ ] GitHub account
- [ ] Render account (free tier)

---

## Step 1: Set Up MongoDB Atlas (5 minutes)

1. Go to https://www.mongodb.com/cloud/atlas/register
2. Sign up for free
3. Create a new project (name it "VirtualClassroom")
4. Build a Database ‚Üí Choose **M0 FREE** tier
5. Choose a cloud provider and region (closest to you)
6. Create cluster (takes 1-3 minutes)
7. **Security Setup**:
   - Create Database User:
     - Username: `classroom_user`
     - Password: Generate a secure password (SAVE THIS!)
   - Network Access: Click "Add IP Address" ‚Üí "Allow Access from Anywhere" (0.0.0.0/0)
8. **Get Connection String**:
   - Click "Connect" on your cluster
   - Choose "Connect your application"
   - Copy the connection string (looks like: `mongodb+srv://classroom_user:<password>@cluster0.xxxxx.mongodb.net/?retryWrites=true&w=majority`)
   - Replace `<password>` with your actual password
   - Add database name at the end: `mongodb+srv://classroom_user:PASSWORD@cluster0.xxxxx.mongodb.net/virtualclass?retryWrites=true&w=majority`

**Save this connection string - you'll need it for Render!**

---

## Step 2: Push Code to GitHub (2 minutes)

### If you don't have a GitHub repo yet:

```bash
# Initialize git (if not already done)
git init

# Add all files
git add .

# Commit
git commit -m "Initial commit - Virtual Classroom App"

# Create a new repository on GitHub.com (name it "virtual-classroom")
# Then connect it:
git remote add origin https://github.com/YOUR_USERNAME/virtual-classroom.git
git branch -M main
git push -u origin main
```

### If you already have a repo:
```bash
git add .
git commit -m "Add Render deployment config"
git push
```

---

## Step 3: Deploy to Render (3 minutes)

1. **Go to Render Dashboard**
   - Visit: https://dashboard.render.com/
   - Sign up/Login (can use GitHub account)

2. **Create New Web Service**
   - Click "New +" button (top right)
   - Select "Web Service"

3. **Connect Repository**
   - Click "Connect account" to link GitHub
   - Find and select your `virtual-classroom` repository
   - Click "Connect"

4. **Configure Service** (Render auto-detects `render.yaml`!)
   - Name: `virtual-classroom` (or your choice)
   - Environment: **Docker**
   - Plan: **Free**
   - Render will auto-fill settings from `render.yaml`

5. **Add Environment Variables** (CRITICAL!)
   Click "Advanced" ‚Üí "Add Environment Variable":
   
   | Key | Value | Notes |
   |-----|-------|-------|
   | `MONGO_URL` | Your MongoDB Atlas connection string | From Step 1 |
   | `ADMIN_SECRET_KEY` | `your-secure-admin-password-123` | Choose a strong password |
   | `SECRET_KEY` | Auto-generated by Render | Leave as is |

6. **Deploy!**
   - Click "Create Web Service"
   - Render will build your Docker image (takes 3-5 minutes first time)
   - Watch the logs for any errors

---

## Step 4: First-Time Setup (1 minute)

Once deployed (you'll see "Live" status):

1. **Visit Your App**
   - Click the URL (e.g., `https://virtual-classroom-xxxx.onrender.com`)

2. **Create Admin Account**
   - Go to `/register`
   - Fill in email and password
   - Select role: **Admin**
   - Enter the `ADMIN_SECRET_KEY` you set in Step 3
   - Click "Sign Up"

3. **Login and Test**
   - Login with your admin credentials
   - Create a test class
   - Verify everything works!

---

## Troubleshooting

### Build Failed?
- Check Render logs for errors
- Verify `Dockerfile` exists in repo
- Ensure `requirements.txt` is complete

### Can't Connect to Database?
- Verify MongoDB Atlas connection string is correct
- Check password has no special characters that need URL encoding
- Ensure IP whitelist includes 0.0.0.0/0

### App Crashes on Start?
- Check environment variables are set correctly
- View Render logs: Dashboard ‚Üí Your Service ‚Üí Logs

---

## What Happens on Free Tier?

‚úÖ **Included:**
- 750 hours/month (enough for 24/7 uptime)
- Automatic HTTPS
- Auto-deploy on git push
- Custom domain support

‚ö†Ô∏è **Limitations:**
- App sleeps after 15 min of inactivity (wakes up in ~30 seconds on first request)
- 512 MB RAM
- Shared CPU

---

## Next Steps After Deployment

1. **Test All Features**:
   - Create teacher and student accounts
   - Create a class
   - Test assignments
   - Try live classroom (video may have limitations on free tier)

2. **Custom Domain** (Optional):
   - Render Settings ‚Üí Custom Domain
   - Add your domain

3. **Monitor**:
   - Check Render dashboard for uptime
   - View logs for errors

---

## Quick Reference

**Your App URLs:**
- Main: `https://YOUR-APP-NAME.onrender.com`
- Login: `https://YOUR-APP-NAME.onrender.com/login`
- Register: `https://YOUR-APP-NAME.onrender.com/register`

**Important Secrets:**
- MongoDB Connection String: (saved from Step 1)
- Admin Secret Key: (set in Step 3)

---

Need help? Check:
- Render Docs: https://render.com/docs
- MongoDB Atlas Docs: https://www.mongodb.com/docs/atlas/
