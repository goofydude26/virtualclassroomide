# Virtual Classroom Super-App

A full-featured virtual classroom platform with live video conferencing, assignments, and real-time chat.

## Features

- **Authentication & Roles**: Student, Teacher, Admin roles with JWT-based auth
- **Live Classroom**: PeerJS-powered video conferencing with real-time chat
- **Assignment Management**: Create, submit, and track assignments
- **Private Classes**: Role-based access control for class visibility
- **Dark/Light Mode**: Theme toggle support

## Tech Stack

- **Backend**: FastAPI, MongoDB, Python
- **Frontend**: Vanilla JavaScript, HTML, CSS
- **Video**: PeerJS for WebRTC connections
- **Auth**: JWT tokens with bcrypt password hashing

## Local Development

### Prerequisites
- Docker & Docker Compose
- Python 3.9+

### Running Locally

```bash
# Start with Docker Compose
docker-compose up --build

# Or run directly
./run.sh
```

The app will be available at `http://localhost:8000`

## Deployment to Render

### Setup

1. **Create MongoDB Atlas Database**
   - Sign up at [MongoDB Atlas](https://www.mongodb.com/cloud/atlas)
   - Create a free cluster
   - Get your connection string (format: `mongodb+srv://username:password@cluster.mongodb.net/dbname`)

2. **Deploy to Render**
   - Push your code to GitHub
   - Go to [Render Dashboard](https://dashboard.render.com/)
   - Click "New +" → "Web Service"
   - Connect your GitHub repository
   - Render will auto-detect the `render.yaml` configuration

3. **Set Environment Variables** (in Render Dashboard)
   - `MONGO_URL`: Your MongoDB Atlas connection string
   - `ADMIN_SECRET_KEY`: A secure secret for admin registration (e.g., `your-secure-admin-key`)
   - `SECRET_KEY`: Auto-generated by Render

### First-Time Setup

After deployment, create your first admin account:

1. Go to your deployed URL + `/register`
2. Select "Admin" role
3. Enter the `ADMIN_SECRET_KEY` you configured
4. Complete registration

## Environment Variables

| Variable | Description | Required |
|----------|-------------|----------|
| `MONGO_URL` | MongoDB connection string | Yes |
| `SECRET_KEY` | JWT signing secret | Yes |
| `ADMIN_SECRET_KEY` | Secret for admin registration | Yes |
| `PORT` | Server port (default: 8000) | No |

## API Endpoints

### Authentication
- `POST /register` - User registration
- `POST /token` - Login (returns JWT)
- `GET /users/me` - Get current user

### Classes
- `POST /classes/` - Create class (Teacher/Admin)
- `GET /classes` - List enrolled classes
- `POST /classes/join` - Join class with code (Student)
- `POST /classes/{id}/approve` - Approve student (Teacher)

### Assignments
- `POST /assignments/` - Create assignment (Teacher)
- `GET /classes/{id}/assignments` - List assignments
- `POST /assignments/{id}/submit` - Submit assignment (Student)

## Project Structure

```
jeroprototype/
├── app/
│   ├── main.py           # FastAPI app
│   ├── auth.py           # JWT authentication
│   ├── database.py       # MongoDB connection
│   ├── models.py         # Pydantic models
│   └── routers/
│       ├── auth.py       # Auth endpoints
│       ├── classroom.py  # Class management
│       └── assignments.py # Assignment endpoints
├── static/
│   ├── css/
│   │   └── style.css     # Global styles
│   └── pages/
│       ├── login.html
│       ├── register.html
│       ├── dashboard.html
│       └── classroom.html # Live classroom UI
├── uploads/              # Assignment submissions
├── Dockerfile
├── docker-compose.yml
├── render.yaml          # Render deployment config
└── requirements.txt
```

## License

MIT
